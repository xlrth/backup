#include "CDate.h"

////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
CDate::CDate(long long value)
    :
    mValue(value)
{}

////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
CDate::CDate(std::chrono::system_clock::time_point value)
    :
    mValue(TimePointToLongLong(value))
{}

////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
bool CDate::IsSpecified() const
{
    return mValue != UNSPECIFIED;
}

////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
CDate::operator std::chrono::system_clock::time_point() const
{
    return LongLongToTimePoint(mValue);
}

////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
CDate::operator long long() const
{
    return mValue;
}

////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
long long CDate::TimePointToLongLong(std::chrono::system_clock::time_point timePoint)
{
    return timePoint.time_since_epoch().count();
}

////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
std::chrono::system_clock::time_point CDate::LongLongToTimePoint(long long longLong)
{
    return std::chrono::system_clock::time_point(std::chrono::system_clock::duration(longLong));
}
